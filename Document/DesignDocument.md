## 会计系统-设计文档

### 1. 系统架构
- 架构模式：分层架构。
  - 输入层：命令行交互或文件读取。
  - 逻辑层：处理会计分录、更新账户、生成报表。
  - 数据层：DataFrame文件存储。
- 技术栈
  - 语言：Python
  - 库：pandas、matplotlib

### 2. 模块设计
#### 2.1 会计分录录入模块
- 通过命令行输入命令添加一条会计分录
- 从文件批量读取会计分录
#### 2.2 账户管理模块
- 以公司为单位管理账户
- 公司类
```
    class Company{
        String name;                //公司名
        List<Account> accounts;     //所有账户
        Dir directory;              //路径(文件夹下包含账户文件)
        public void createAccount(){
            //创建新账户
        }
    }
```
- 账户分类：资产、负债、所有者权益、收入、费用、利润
- 账户类
```
    class Account{
        String name;        //账户名
        double balance;      //余额
        File file;          //账户表文件
        Type type;          //账户类型（资产、负债……）
        public void update(Entry entry){
            //根据分录更新账户信息
        }
    }
```
- 使用list存储所有的账户对象
#### 2.3 报表生成模块
- 资产-负债表
  - 汇总所有资产和负债账户的信息，生成.csv文件
- 利润表
  - 汇总收入和费用的信息，产生利润,生成.csv文件
#### 2.4 财务分析模块
- 利用报表信息，分别获取资产、负债、收入、费用数据，生成饼图

### 3. 数据存储设计
- 目录结构
```
  /accounting_system/
      ├── company.py            # Company类实现
      ├── data/
          ├── accounts/         # 存储所有账户CSV文件
              ├── 现金.csv
              ├── 银行存款.csv
          ├── reports/          # 生成的报表
```
- 账户数据：使用三栏式记账法，具体形式如下
```
    日期,摘要,对方科目,借方金额,贷方金额,余额
    2023-10-01,期初余额,,,1000,1000
    2023-10-02,购买设备,银行存款,500,,500
```
- 会计分录：
  - 通过命令行录入：
  ```
    format:   date\abstract\credit\debt\amount
    example:  2023-10-02\购买设备\固定资产\银行存款\10000
  ```
  - 通过读取.csv文件录入：
  ```
    日期,摘要,借方科目,贷方科目,发生额
    2023-10-02,购买设备,固定资产,银行存款,10000
    2023-10-03,向银行贷款,银行存款,长期借款,10000000
  ```